// drag.js 0.0.1-alpha
// Build Date: 2012-11-17

// (c) 2012 Kristofer Joseph.
// This may be freely distributed under the MIT license.
(function(e){"use strict";e.event.props.push("dataTransfer"),e.Event.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},e.fn.drag=function(t){var n=this,r,i,s=e.extend({target:"body",setData:"Text",effectAllowed:"copyMove",start:function(e,t){return this},drag:function(e,t){return this},enter:function(e,t){return this},over:function(e,t){return this},leave:function(e,t){return this},drop:function(e,t){return t.offset({top:e.originalEvent.pageY-t.offsetY,left:e.originalEvent.pageX-t.offsetX}),this},end:function(e,t){return this}},t);return n.start=s.start,n.drag=s.drag,n.enter=s.enter,n.over=s.over,n.leave=s.leave,n.drop=s.drop,n.end=s.end,e(s.target).on("dragenter",function(e){e.stop(),n.enter.call(n,e,n)}).on("dragover",function(e){e.stop(),n.over.call(n,e,n)}).on("dragleave",function(e){e.stopPropagation(),n.leave.call(n,e,n)}).on("drop",function(e){e.stop(),n.drop.call(n,e,n)}),n.mousedown(function(e){e.stopPropagation(),this.draggable=!0,n.offsetX=e.offsetX,n.offsetY=e.offsetY}).on("dragstart",function(e){e.stopPropagation(),e.dataTransfer.effectAllowed=s.effectAllowed,e.dataTransfer.setData(s.setData,n.id),n.start.call(n,e,n)}).on("drag",function(e){n.drag.call(n,e,n)}).on("dragend",function(e){e.stopPropagation(),this.draggable=!1,n.end.call(n,e,n)}),n}})(jQuery);